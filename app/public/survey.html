<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="UTF-8">
  <title>New Friend – Survey</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <style type="text/css">

  body {
    background-color: white;
  }

  h1 {
    color: #ff8533;
    text-align: center;
    font-size: 48px;
    padding-bottom: 12px;
  }

  h3 {
    color: #ff8533;
  }

  hr {
    border-color: #ff8533;
  }

  a {
    color: #ff8533;
    cursor: pointer;
  }

  a#hov:hover {
    color: #ff9900;
    text-decoration: none;
  }

  a:visited {
    color: #595959;
  }

  a.btn {
    color: #333;
  }

  p {
    font-size: 16px;
  }

  #submit-button {
    background-color: #ff8533;
    border-color: #ff8533;
    color: white;
  }

  #matchImg {
    max-height: 75%;
    max-width: 75%;
  }

  .btn-lg {
    background-color: #adebeb;
    color: #333;
  }

  </style>
</head>

<body>
  <div class="container">
    <h1>Survey Questions</h1>
    <p>Make sure to fill in the form fields and answer all questions before submitting your survey!</p>
    <hr>
    <h3>About You</h3>
    <form>
      <label for>Name (Required)</label>
      <br>
      <input id="name" type="text" class="form-control" placeholder="Name"></input>
      <br>
      <label for>Link to Photo (Required)</label>
      <br>
      <input id="photo" type="text" class="form-control" placeholder="https://..."></input>
    </form>
    <hr>
    <h3>Question One</h3>
      <h4>I enjoy long walks on the beach and discussing literature by the fire.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Two</h3>
      <h4>Music is a part of my everyday existence.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Three</h3>
      <h4>Bad movies can be as enjoyable to watch as good movies.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Four</h3>
      <h4>Gummi bears are better than popcorn.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Five</h3>
      <h4>Radiohead is a good band.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Six</h3>
      <h4>I'd rather not discuss politics.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q6" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Seven</h3>
      <h4>Driving a car is a dangerous and frightening prospect.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q7" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Eight</h3>
      <h4>Dogs are better than cats because cats aren't affectionate enough.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q8" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Nine</h3>
      <h4>Empire Strikes Back is the worst of the original Star Wars movies because it's the most boring.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q9" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
    <h3>Question Ten</h3>
      <h4>I should be allowed to blurt the merest idea if, by random whim, one occurs to me.</h4>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="q10" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" style="width:200px">Select an option <span class="caret"></span></button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          <li><a data-value="1">1 – Strongly Disagree</a></li>
          <li><a data-value="2">2</a></li>
          <li><a data-value="3">3 – Staunchly Ambivalent</a></li>
          <li><a data-value="4">4</a></li>
          <li><a data-value="5">5 – Strongly Agree</a></li>
        </ul>
      </div>
  <br>
  <button id="submit-button" type="submit" class="btn btn-primary btn-lg btn-block"><span class="glyphicon glyphicon-ok"></span> Submit</button>
  <hr>
  <p><a id="hov" href="/api/friends" target="_blank">API Friends List</a> | <a id="hov" href="http://github.com/sarahjelt/friend-finder" target="_blank">GitHub Repo</a></p>
  </div>
  <!-- results modal -->
  <div id="resultsModal" class="modal fade" role="dialog" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h2 class="modal-title">Best Match</h2>
        </div>
        <div class="modal-body">
          <h2 id="matchName"></h2>
          <img id="matchImg" src="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- warning modal-->
  <div id="warningModal" class="modal fade" role="dialog" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">x</button>
          <h2 class="modal-title">Warning!</h2>
        </div>
        <div class="modal-body">
          <h3>Please fill out all fields and answer all questions before submitting!</h3>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">

  // makes text of dropdown button change to whichever item is selected
  $(".dropdown-menu li a").click(function(){
    $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
    $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
  });

  //onclick event for submit button
  $("#submit-button").on("click", function(event) {

    //validate whether form is complete
    function validateForm() {
      var isValid = true;
      $(".form-control").each(function() {
        if ($(this).val() === "") {
          isValid = false;
        }
      })
      $(".dropdown-toggle").each(function() {
        if ($(this).text() === "Select an option ") {
          isValid = false;
        }
      })
      return isValid;
    };

    if (validateForm() == true) {

      var newFriend = {
        name: $("#name").val().trim(),
        photo: $("#photo").val().trim(),
        scores: [$("#q1").attr("value"), $("#q2").attr("value"), $("#q3").attr("value"), $("#q4").attr("value"), $("#q5").attr("value"), $("#q6").attr("value"), $("#q7").attr("value"), $("#q8").attr("value"), $("#q9").attr("value"), $("#q10").attr("value")]
      }

      // posts answers to server and modal pops up, apiRoutes post handles match logic
      $.post("/api/friends", newFriend, function(data) {
        $("#matchName").text(data.name);
        $("#matchImg").attr("src", data.photo);
        $("#resultsModal").modal("toggle");
      });
    } else {
      $("#matchName").text("Please fill out all fields and answer all questions!");
      $("#warningModal").modal("toggle");
    }
    return false;
  });

  </script>
</body>
</html>